import org.w3c.dom.CanvasRenderingContext2D
import org.w3c.dom.Element
import org.w3c.dom.events.KeyboardEvent
import org.w3c.dom.events.MouseEvent
import kotlin.browser.document
import kotlin.browser.window
import kotlin.js.Date

fun main(args: Array<String>) {
    println("hello world")
    window.onload = { onLoad() }
}

fun onLoad() {
    val canvas = document.getElementById("mainCanvas")!!
    println(canvas.className)
    MainView(canvas).init()
}

class MainView(val canvas: Element) {
    val ctx = canvas.asDynamic().getContext("2d") as CanvasRenderingContext2D
    val iterationsCount = 64
    val colors1 = intArrayOf(-13882322, -13816786, -13751250, -13685714, -13620178, -13554642, -13489106, -13423571, -13358035, -13226963, -13161427, -13095891, -12964819, -12899283, -12768211, -12702676, -12571604, -12440532, -12374996, -12243924, -12112852, -12047316, -11915988, -11784917, -11653845, -11522773, -11391701, -11260629, -11129557, -10998229, -10867157, -10736085, -10605013, -10473685, -10342613, -10211541, -10080213, -9949141, -9883605, -9817813, -9752277, -9686741, -9621205, -9555669, -9424341, -9358805, -9293269, -9227733, -9162197, -9030869, -8965332, -8899796, -8768724, -8703188, -8637396, -8506324, -8440788, -8375252, -8243924, -8178388, -8112852, -7981780, -7916244, -7850452, -7719380, -7653844, -7522772, -7456980, -7325907, -7260371, -7194579, -7063507, -6997971, -6866899, -6801107, -6735571, -6604499, -6538707, -6407635, -6342098, -6210770, -6145234, -6079698, -5948370, -5882834, -5751506, -5685970, -5620434, -5489105, -5423569, -5357777, -5226705, -5160913, -5095377, -4964048, -4898512, -4832720, -4767184, -4635856, -4570320, -4504527, -4438991, -4373199, -4241871, -4176335, -4110542, -4044750, -3979214, -3913422, -3847629, -3782093, -3716301, -3650509, -3584716, -3519180, -3453388, -3387596, -3321804, -3256011, -3190475, -3190219, -3124427, -3058634, -2992842, -2927050, -2861258, -2795465, -2729673, -2729417, -2663625, -2597832, -2532040, -2466248, -2400456, -2400199, -2334407, -2268615, -2202823, -2202566, -2136774, -2070982, -2005190, -2004933, -1938885, -1873093, -1807300, -1807044, -1741252, -1675459, -1675203, -1609155, -1543362, -1543106, -1477314, -1411521, -1411009, -1345217, -1344960, -1279168, -1213375, -1212863, -1147071, -1146814, -1081022, -1080765, -1014717, -1014460, -948668, -948411, -882619, -882106, -816314, -816057, -750265, -750008, -683960, -683703, -617910, -617654, -617397, -551348, -551092, -550835, -485042, -484786, -418993, -418736, -418480, -418224, -418223, -417967, -417967, -417710, -417710, -417454, -417453, -417197, -417196, -416940, -416940, -416683, -416683, -416427, -416426, -416170, -416169, -415913, -415913, -415656, -415656, -415399, -415399, -415143, -415142, -414886, -414885, -414629, -414628, -414372, -414371, -414115, -413859, -413858, -413602, -413601, -413345, -413344, -413088, -413087, -412831, -412574, -412574, -412317, -412317, -412060, -412060, -411803, -411803, -411546, -411290, -411289, -411033, -411032, -410776, -410775, -410519, -410262, -410262, -410005, -410005, -409748, -409747, -409491, -409490, -409234, -408977, -408977, -408720, -408720, -408463, -408463, -408206, -407950, -407949, -407692, -407692, -407435, -407435, -407178, -406922, -406921, -406665, -406664, -406408, -406407, -406150, -406150, -405893, -405637, -405636, -405380, -405379, -405123, -405122, -404866, -404865, -404608, -404608, -404351, -404351, -404094, -403838, -403837, -403581, -403580, -403324, -403323, -403067, -403066, -402810, -402809, -402553, -402552, -402295, -402295, -402038, -402038, -401781, -401781, -401524, -401524, -401267, -401267, -401010, -401010, -400753, -400753, -400497, -400496, -400240, -400239, -400239, -399982, -399982, -399725, -399725, -465004, -465004, -464747, -464747, -464747, -464490, -464490, -464233, -464233, -464232, -463976, -463976, -463719, -463719, -463718, -463462, -463462, -463205, -463205, -463205, -462948, -462948, -528483, -528227, -528227, -528226, -527970, -527970, -527969, -527713, -527713, -527712, -527456, -527456, -527456, -527199, -527199, -527199, -527198, -526942, -526942, -526942, -526685, -526685, -5816014, -5881553, -5881553, -5881553, -5881553)
    val colors2 = intArrayOf(-16742408, -16742407, -16742148, -16741891, -16741890, -16741633, -16741633, -16741377, -16741377, -16741377, -16740866, -16740866, -16740099, -16739843, -16739329, -16738817, -14248705, -14248705, -14248705, -14117377, -14116865, -13985537, -13788417, -13788417, -13460481, -13394689, -13263361, -12738561, -12607233, -12607233, -12344833, -12344834, -12540929, -12279041, -12213249, -12213249, -11950849, -11884801, -11426049, -11426049, -11295745, -11294977, -11229185, -10836225, -10770433, -10705153, -10705155, -10705155, -10639362, -10508546, -10508546, -10377217, -10115329, -10049537, -9918465, -9918465, -9918465, -9918465, -9656577, -9656577, -9525507, -9459714, -9459714, -9459716, -9328644, -9328644, -9262851, -9197058, -9131265, -9065473, -9065473, -8999681, -8672001, -8475649, -8475649, -8475649, -8279297, -8279297, -8148225, -8148225, -8082433, -8082433, -8148225, -8148225, -8148225, -8148225, -8082433, -8082433, -7689217, -7689217, -7689217, -7558401, -7558401, -7361793, -7361793, -7361793, -7164930, -7164930, -7164930, -7164930, -7099137, -7099137, -7099137, -7099137, -6967553, -6836737, -6836737, -6836737, -6640385, -6640385, -6509569, -6509569, -6706178, -6706178, -6575106, -6575106, -6378754, -6378754, -6378754, -6378754, -6509313, -6509313, -6509313, -6312961, -6312961, -6182145, -6182145, -6182145, -6313990, -6248197, -6182404, -5920516, -5920516, -5920516, -5854980, -5854980, -5920516, -5854980, -5854980, -5854980, -5658628, -5658628, -5527812, -5527812, -5330433, -5330433, -5199617, -5199617, -5003265, -5003265, -4937729, -4937729, -5069057, -5069057, -5069057, -5069057, -5069057, -5069057, -5069057, -5069057, -5331201, -5331201, -5331201, -5331201, -5331201, -5331201, -5331201, -5331201, -5266689, -5200897, -5200897, -5070081, -5070081, -4939009, -4939009, -4939009, -5071105, -5071105, -5071105, -5005313, -5005313, -5005313, -5005313, -5005313, -5071105, -5071105, -5071105, -5136897, -5136897, -5136897, -5137153, -5137153, -5072129, -5072129, -5072129, -5137921, -5137921, -5203713, -5203713, -5203713, -5335298, -5335298, -5269505, -5203713, -5203713, -5203713, -5203713, -5203713, -5204225, -5204225, -5270017, -5270017, -5270017, -5270017, -5335809, -5335809, -5401601, -5401601, -5401601, -5401601, -5401601, -5467393, -5467393, -5467393, -5533697, -5402625, -5402625, -5402625, -5271809, -5271809, -5075457, -5075457, -5469185, -5469185, -5469185, -5469185, -5535233, -5535233, -5535233, -5535233, -5600513, -5600513, -5666305, -5666305, -5732353, -5732353, -5798145, -5798145, -6060289, -5863937, -5797889, -5863682, -5798403, -5863942, -5733383, -5799178, -5799429, -5799429, -5733636, -5799429, -5799429, -5865222, -5931015, -5996808, -6193160, -6193160, -6193160, -6193160, -6258953, -6324746, -6390539, -6390539, -6456330, -6456330, -6522123, -6522123, -6587916, -6653709, -6653709, -6719502, -6916624, -6850831, -6850831, -6850831, -6916624, -6982417, -7048210, -7048210, -7114001, -7048208, -7048208, -7048208, -7114001, -7179794, -7245587, -7245587, -7376146, -7376146, -7441939, -7441939, -7507732, -7507732, -7573781, -7573781, -7704853, -7770646, -7770646, -7770646, -7836439, -7836439, -7836439, -7836439, -8099611, -8099611, -8099611, -8099611, -8165404, -8165404, -8231197, -8296990, -8296990, -8296990, -8296990, -8296990, -8296990, -8296990, -8296990, -8296990, -8494369, -8494369, -8494369, -8494369, -8494369, -8494369, -8494369, -8494369, -8625953, -8625953, -8625953, -8691746, -8691746, -8757539, -8757539, -8757539, -8757539, -8691746, -8691746, -8691746, -8757539, -8823332, -8889125, -8889125, -8954918, -8954918, -8954918, -8954918, -9020710, -9020710, -9020710, -9020710, -9020710, -9020710, -9086503, -9086503, -9218088, -9218088, -9283881, -9283881, -9414954, -9414954, -9414954, -9480747, -9480747, -9480747, -9480747, -9546540, -9546540, -9612333, -9612333, -9678126, -9678126, -9809455, -9809455, -9809455, -9809457, -9809457, -9809457, -9875250, -9875250, -9941043, -9941043, -9941043, -9941043, -10006836, -10006836, -10006836, -10006836, -10072629, -10072629, -10072629, -10138422, -10138422, -10138422, -10204215, -10204215, -10270008, -10270008, -10335801, -10335801, -10335801, -10335801, -10335801, -10401850, -10401850, -10401850, -10401850, -10467645, -10467645, -10533438, -10533438, -10599231, -10599231, -10665024, -10665024, -10730817, -10730817, -10730817, -10730817, -10730817, -10796610, -10862403, -10928196, -10992962, -10992962, -10992962, -11058755, -11058755, -11058755, -11058755, -11190084, -11190084, -11255877, -11255877, -11255877, -11255877, -11321670, -11321670, -11321670, -11387209, -11387209, -11387209, -11453002, -11453002, -11518795, -11518795, -11584588, -11584588, -11584588, -11584588, -11584588, -11650637, -11650637, -11650637, -11650637, -11650638, -11650638, -11650638, -11716431, -11716431, -11716431, -11716431, -11716431, -11847761, -11913554, -11913554, -11913554, -11979347, -12045140, -12045140, -12045140, -12045140, -12045140, -12045140, -12045140, -12045140, -12110933, -12110933, -12110933, -12308312, -12308312, -12308312, -12374361, -12374361, -12440154, -12440154, -12440154, -12440156, -12440156, -12440156, -12440156, -12505949, -12505949, -12505949, -12505949, -12703071, -12703071, -12703071, -12703071, -12768864, -12768864, -12768864, -12768864, -12768864, -12768864, -12768610, -12834403, -12834405, -12834405, -12834405, -12900199, -12834405, -12965991, -12965991, -12900198, -12768612, -12768612, -12965991, -13229162, -12769893, -12769893, -12835686, -12835686, -12901479, -12901479, -13032808, -13032808, -13098601, -13098601, -13098603, -13164396, -13164396, -13164141, -13164141, -13164141, -13099373, -13099373, -13099373, -13099373, -13099373, -13165422, -13165422, -13165422, -13296496, -13296496, -13296496, -13296496, -13362289, -13362289, -13362289, -13362289, -13296500, -13296500, -13362293, -13362293, -13362293, -13362293, -13428086, -13428086, -13428086, -13428086, -13428086, -13428086, -13493879, -13493879, -13493879, -13493879, -13494136, -13494136, -13494136, -13559929, -13559929, -13559929, -13559929, -13625978, -13559929, -13559929, -13559929, -13559932, -13559932, -13559932, -13559933, -13559933, -13494910, -13560703, -13626496, -13626496, -13692289, -13626496, -13626496, -13626496, -13692289, -13626496, -13626496, -13626496, -13626496, -13692289, -13692289, -13758082, -13692289, -13758082, -13692804, -13692804, -13496198, -13562247, -13496967, -13496713, -13562247, -13562247, -13562247, -13562247, -13628040, -13628040, -13628040, -13628040, -13497226, -13497226)
    val colors3 = intArrayOf(-65794, -65794, -65794, -131587, -131587, -131587, -131587, -197380, -197380, -197380, -263173, -263173, -263173, -263173, -328966, -328966, -328966, -394759, -394759, -394759, -394759, -460552, -460552, -460552, -526345, -526345, -526345, -526345, -592138, -592138, -592138, -657931, -657931, -657931, -657931, -723724, -723724, -723724, -789517, -789517, -789517, -789517, -855310, -855310, -855310, -921103, -921103, -921103, -921103, -986896, -986896, -986896, -1052689, -1052689, -1052689, -1052689, -1118482, -1118482, -1118482, -1184275, -1184275, -1184275, -1184275, -1250068, -1250068, -1250068, -1315861, -1315861, -1315861, -1315861, -1381654, -1381654, -1381654, -1381654, -1447447, -1447447, -1447447, -1513240, -1513240, -1513240, -1513240, -1579033, -1579033, -1579033, -1644826, -1644826, -1644826, -1644826, -1710619, -1710619, -1710619, -1776412, -1776412, -1776412, -1776412, -1842205, -1842205, -1842205, -1907998, -1907998, -1907998, -1907998, -1973791, -1973791, -1973791, -2039584, -2039584, -2039584, -2039584, -2105377, -2105377, -2105377, -2171170, -2171170, -2171170, -2171170, -2236963, -2236963, -2236963, -2302756, -2302756, -2302756, -2302756, -2368549, -2368549, -2368549, -2434342, -2434342, -2434342, -2434342, -2500135, -2500135, -2500135, -2565928, -2565928, -2565928, -2565928, -2631721, -2631721, -2631721, -2697514, -2697514, -2697514, -2697514, -2763307, -2763307, -2763307, -2829100, -2829100, -2829100, -2829100, -2894893, -2894893, -2894893, -2960686, -2960686, -2960686, -2960686, -3026479, -3026479, -3026479, -3092272, -3092272, -3092272, -3092272, -3158065, -3158065, -3158065, -3223858, -3223858, -3223858, -3223858, -3289651, -3289651, -3289651, -3355444, -3355444, -3355444, -3355444, -3421237, -3421237, -3421237, -3487030, -3487030, -3487030, -3487030, -3552823, -3552823, -3552823, -3618616, -3618616, -3618616, -3618616, -3684409, -3684409, -3684409, -3684409, -3750202, -3750202, -3750202, -3815995, -3815995, -3815995, -3815995, -3881788, -3881788, -3881788, -3947581, -3947581, -3947581, -3947581, -4013374, -4013374, -4013374, -4079167, -4079167, -4079167, -4079167, -4144960, -4144960, -4144960, -4210753, -4210753, -4210753, -4210753, -4276546, -4276546, -4276546, -4342339, -4342339, -4342339, -4342339, -4408132, -4408132, -4408132, -4473925, -4473925, -4473925, -4473925, -4539718, -4539718, -4539718, -4605511, -4605511, -4605511, -4605511, -4671304, -4671304, -4671304, -4737097, -4737097, -4737097, -4737097, -4802890, -4802890, -4802890, -4868683, -4868683, -4868683, -4868683, -4934476, -4934476, -4934476, -5000269, -5000269, -5000269, -5000269, -5066062, -5066062, -5066062, -5131855, -5131855, -5131855, -5131855, -5197648, -5197648, -5197648, -5263441, -5263441, -5263441, -5263441, -5329234, -5329234, -5329234, -5395027, -5395027, -5395027, -5395027, -5460820, -5460820, -5460820, -5526613, -5526613, -5526613, -5526613, -5592406, -5592406, -5592406, -5658199, -5658199, -5658199, -5658199, -5723992, -5723992, -5723992, -5789785, -5789785, -5789785, -5789785, -5855578, -5855578, -5855578, -5921371, -5921371, -5921371, -5921371, -5987164, -5987164, -5987164, -6052957, -6052957, -6052957, -6052957, -6118750, -6118750, -6118750, -6118750, -6184543, -6184543, -6184543, -6250336, -6250336, -6250336, -6250336, -6316129, -6316129, -6316129, -6381922, -6381922, -6381922, -6381922, -6447715, -6447715, -6447715, -6513508, -6513508, -6513508, -6513508, -6579301, -6579301, -6579301, -6645094, -6645094, -6645094, -6645094, -6710887, -6710887, -6710887, -6776680, -6776680, -6776680, -6776680, -6842473, -6842473, -6842473, -6908266, -6908266, -6908266, -6908266, -6974059, -6974059, -6974059, -7039852, -7039852, -7039852, -7039852, -7105645, -7105645, -7105645, -7171438, -7171438, -7171438, -7171438, -7237231, -7237231, -7237231, -7303024, -7303024, -7303024, -7303024, -7368817, -7368817, -7368817, -7434610, -7434610, -7434610, -7434610, -7500403, -7500403, -7500403, -7566196, -7566196, -7566196, -7566196, -7631989, -7631989, -7631989, -7697782, -7697782, -7697782, -7697782, -7763575, -7763575, -7763575, -7829368, -7829368, -7829368, -7829368, -7895161, -7895161, -7895161, -7960954, -7960954, -7960954, -7960954, -8026747, -8026747, -8026747, -8092540, -8092540, -8092540, -8092540, -8158333, -8158333, -8158333, -8224126, -8224126, -8224126, -8224126, -8289919, -8289919, -8289919, -8355712, -8355712, -8355712, -8355712, -8421505, -8421505, -8421505, -8421505, -8487298, -8487298, -8487298, -8553091, -8553091, -8553091, -8553091, -8618884, -8618884, -8618884, -8684677, -8684677, -8684677, -8684677, -8750470, -8750470, -8750470, -8816263, -8816263, -8816263, -8816263, -8882056, -8882056, -8882056, -8947849, -8947849, -8947849, -8947849, -9013642, -9013642, -9013642, -9079435, -9079435, -9079435, -9079435, -9145228, -9145228, -9145228, -9211021, -9211021, -9211021, -9211021, -9276814, -9276814, -9276814, -9342607, -9342607, -9342607, -9342607, -9408400, -9408400, -9408400, -9474193, -9474193, -9474193, -9474193, -9539986, -9539986, -9539986, -9605779, -9605779, -9605779, -9605779, -9671572, -9671572, -9671572, -9737365, -9737365, -9737365, -9737365, -9803158, -9803158, -9803158, -9868951, -9868951, -9868951, -9868951, -9934744, -9934744, -9934744, -10000537, -10000537, -10000537, -10000537, -10066330, -10066330, -10066330, -10132123, -10132123, -10132123, -10132123, -10197916, -10197916, -10197916, -10263709, -10263709, -10263709, -10263709, -10329502, -10329502, -10329502, -10395295, -10395295, -10395295, -10395295, -10461088, -10461088, -10461088, -10526881, -10526881, -10526881, -10526881, -10592674, -10592674, -10592674, -10658467, -10658467, -10658467, -10658467, -10724260, -10724260, -10724260, -10790053, -10790053, -10790053, -10790053, -10855846, -10855846, -10855846, -10855846, -10921639, -10921639, -10921639, -10987432, -10987432, -10987432, -10987432, -11053225, -11053225, -11053225, -11119018, -11119018, -11119018, -11119018, -11184811, -11184811, -11184811, -11250604, -11250604, -11250604, -11250604, -11316397, -11316397, -11316397, -11382190, -11382190, -11382190, -11382190, -11447983, -11447983, -11447983, -11513776, -11513776, -11513776, -11513776, -11579569, -11579569, -11579569, -11645362, -11645362, -11645362, -11645362, -11711155, -11711155, -11711155, -11776948, -11776948, -11776948, -11776948, -11842741, -11842741, -11842741, -11908534, -11908534, -11908534, -11908534, -11974327, -11974327, -11974327, -12040120, -12040120, -12040120, -12040120, -12105913, -12105913, -12105913, -12171706, -12171706, -12171706, -12171706, -12237499, -12237499, -12237499, -12303292, -12303292, -12303292, -12303292, -12369085, -12369085, -12369085, -12434878, -12434878, -12434878, -12434878, -12500671, -12500671, -12500671, -12566464, -12566464, -12566464, -12566464, -12632257, -12632257, -12632257, -12698050, -12698050, -12698050, -12698050, -12763843, -12763843, -12763843, -12829636, -12829636, -12829636, -12829636, -12895429, -12895429, -12895429, -12961222, -12961222, -12961222, -12961222, -13027015, -13027015, -13027015, -13092808, -13092808, -13092808, -13092808, -13158601, -13158601, -13158601, -13224394, -13224394, -13224394, -13224394, -13290187, -13290187, -13290187, -13290187, -13355980, -13355980, -13355980, -13421773, -13421773, -13421773, -13421773, -13487566, -13487566, -13487566, -13553359, -13553359, -13553359, -13553359, -13619152, -13619152, -13619152, -13684945, -13684945, -13684945, -13684945, -13750738, -13750738, -13750738, -13816531, -13816531, -13816531, -13816531, -13882324, -13882324, -13882324, -13948117, -13948117, -13948117, -13948117, -14013910, -14013910, -14013910, -14079703, -14079703, -14079703, -14079703, -14145496, -14145496, -14145496, -14211289, -14211289, -14211289, -14211289, -14277082, -14277082, -14277082, -14342875, -14342875, -14342875, -14342875, -14408668, -14408668, -14408668, -14474461, -14474461, -14474461, -14474461, -14540254, -14540254, -14540254, -14606047, -14606047, -14606047, -14606047, -14671840, -14671840, -14671840, -14737633, -14737633, -14737633, -14737633, -14803426, -14803426, -14803426, -14869219, -14869219, -14869219, -14869219, -14935012, -14935012, -14935012, -15000805, -15000805, -15000805, -15000805, -15066598, -15066598, -15066598, -15132391, -15132391, -15132391, -15132391, -15198184, -15198184, -15198184, -15263977, -15263977, -15263977, -15263977, -15329770, -15329770, -15329770, -15395563, -15395563, -15395563, -15395563, -15461356, -15461356, -15461356, -15527149, -15527149, -15527149, -15527149, -15592942, -15592942, -15592942, -15592942, -15658735, -15658735, -15658735, -15724528, -15724528, -15724528, -15724528, -15790321, -15790321, -15790321, -15856114, -15856114, -15856114, -15856114, -15921907, -15921907, -15921907, -15987700, -15987700, -15987700, -15987700, -16053493, -16053493, -16053493, -16119286, -16119286, -16119286, -16119286, -16185079, -16185079, -16185079, -16250872, -16250872, -16250872, -16250872, -16316665, -16316665, -16316665, -16382458, -16382458, -16382458, -16382458, -16448251, -16448251, -16448251, -16514044, -16514044, -16514044, -16514044)
//    val colors3 = intArrayOf(-6503484, -6503484, -6503484, -6503484, -6503484, -6503484, -6503484, -6503484, -6503484, -6437948, -6437948, -6437948, -6437948, -6437948, -6437948, -6437948, -6437948, -6437948, -6372668, -6372668, -6438461, -6438461, -6438461, -6438461, -6438461, -6372925, -6307645, -6307645, -6307645, -6307645, -6307645, -6307645, -6307645, -6307645, -6307645, -6307645, -6307645, -6242109, -6242109, -6242365, -6242365, -6242109, -6176573, -6176573, -6176573, -6176573, -6111293, -6111294, -6111293, -6111293, -6111293, -6111293, -6111293, -6111294, -6111550, -6177086, -6177086, -6111551, -6111551, -6046272, -6046272, -6046272, -6046272, -6046272, -6046272, -6046272, -6046272, -6046272, -6046272, -6046272, -6046272, -6046272, -6046272, -6046272, -5980992, -5980992, -5980992, -5980992, -5980992, -5980992, -5980992, -5980992, -5915712, -5915712, -5915712, -5915712, -5915712, -5915712, -5915712, -5915712, -5784896, -5784896, -5784896, -5784896, -5784896, -5784896, -5784896, -5784896, -5784896, -5784896, -5784896, -5784896, -5719360, -5719360, -5719360, -5719360, -5785153, -5785153, -5785153, -5785153, -5719873, -5719873, -5719873, -5719873, -5719873, -5719873, -5719873, -5719873, -5719873, -5719873, -5719873, -5654337, -5588802, -5588802, -5588802, -5588802, -5589058, -5589058, -5589058, -5589058, -5589058, -5589058, -5589058, -5589058, -5589058, -5589058, -5589058, -5589058, -5523778, -5458242, -5458242, -5458242, -5458242, -5458242, -5458242, -5458242, -5392706, -5392706, -5392706, -5392706, -5392706, -5392706, -5392706, -5392706, -5392962, -5327426, -5327426, -5327426, -5327426, -5327426, -5327426, -5327426, -5327426, -5327426, -5327426, -5327426, -5262146, -5262146, -5262146, -5262146, -5262403, -5262403, -5262403, -5262403, -5197123, -5197123, -5197123, -5197123, -5197123, -5197123, -5197123, -5197123, -5197123, -5197123, -5197123, -5197123, -5066052, -5066053, -5066053, -5066053, -5066053, -5066053, -5066053, -5066053, -5066053, -5066053, -5066053, -5066053, -5000773, -5000773, -5000773, -5000772, -5000772, -5000772, -5000772, -5000772, -4935236, -4935236, -4935236, -4935236, -4935236, -4935236, -4935236, -4935237, -4935237, -4935237, -4935237, -4869701, -4804421, -4804421, -4804421, -4804421, -4804421, -4804421, -4804421, -4738885, -4739141, -4739141, -4739141, -4739141, -4739141, -4739141, -4739141, -4673605, -4608325, -4608325, -4608325, -4608325, -4608325, -4608325, -4608325, -4608325, -4608325, -4608325, -4608325, -4608325, -4608325, -4608325, -4608325, -4608325, -4543046, -4543047, -4543047, -4543047, -4543047, -4543047, -4543047, -4543047, -4543047, -4543047, -4543047, -4543047, -4477511, -4411975, -4411975, -4411975, -4411975, -4411975, -4411975, -4412231, -4412231, -4346695, -4346695, -4346695, -4346695, -4346695, -4346695, -4346695, -4346695, -4346695, -4346695, -4346696, -4346697, -4346697, -4346697, -4346697, -4346697, -4346697, -4346697, -4346697, -4281160, -4215624, -4215624, -4215624, -4215624, -4215624, -4215624, -4215624, -4150345, -4150345, -4150345, -4150345, -4150345, -4150345, -4150345, -4150345, -4150345, -4150345, -4150345, -4150345, -4085065, -4085065, -4085065, -4085065, -4150345, -4150345, -4150345, -4150345, -4150345, -4150345, -4150345, -4150345, -4150345, -4150345, -4150345, -4150345, -4085065, -4085065, -4085065, -4085065, -4085065, -4085065, -4085065, -4019529, -3953993, -3953993, -3953993, -3953993, -3953993, -3953993, -3953993, -3953993, -3953993, -3953993, -3953993, -3888457, -3888456, -3822920, -3822920, -3822920, -3822920, -3822920, -3822920, -3822920, -3822920, -3822920, -3822920, -3757384, -3757384, -3691848, -3691848, -3691848, -3691848, -3691848, -3691848, -3691848, -3626312, -3626312, -3626312, -3626312, -3626312, -3626312, -3626312, -3626312, -3626312, -3626312, -3626312, -3626312, -3626311, -3626312, -3691848, -3691593, -3626057, -3626057, -3626057, -3626057, -3626057, -3626057, -3626057, -3626057, -3626057, -3626057, -3626057, -3626313, -3626313, -3626313, -3626313, -3626313, -3626313, -3626313, -3626313, -3626313, -3626313, -3626313, -3626313, -3626313, -3560777, -3561033, -3561033, -3561033, -3561033, -3560777, -3560777, -3560777, -3560777, -3560777, -3561033, -3560777, -3560777, -3560777, -3560777, -3560777, -3560777, -3560777, -3560777, -3495241, -3429961, -3429961, -3429961, -3429961, -3429961, -3429961, -3429961, -3429961, -3429961, -3429705, -3429705, -3429705, -3429705, -3429705, -3429705, -3429705, -3429705, -3429705, -3429705, -3429705, -3429960, -3429960, -3429705, -3429705, -3429960, -3429960, -3429705, -3364425, -3364680, -3299144, -3298889, -3364681, -3364680, -3364680, -3364425, -3298889, -3233608, -3168072, -3168073, -3233609, -3233608, -3168072, -3167816, -3167816, -3167815, -3167814, -3167814, -3167814, -3167814, -3167814, -3167814, -3167815, -3102535, -3102534, -3102278, -3102278, -3036742, -3036742, -3102278, -3102278, -3036742, -3036742, -3102278, -3102278, -3102278, -3102534, -3102278, -3102278, -3102534, -3102534, -3102278, -3102278, -3102534, -3102534, -3102278, -3102278, -3102534, -3036999, -3102535, -3036744, -3036745, -3036489, -3036489, -2970953, -2971209, -2971209, -2970953, -2970953, -2971209, -2971209, -2970953, -2970953, -2971209, -2971209, -2970953, -2970953, -2971209, -2971209, -3036489, -3036489, -2971209, -2971209, -3036745, -2970953, -2971209, -2971209, -2970953, -2970953, -2971209, -2971209, -2970953, -2970953, -2971209, -2971209, -2970953, -2970953, -2971209, -2971209, -2970953, -2970953, -2971209, -2971209, -2970953, -2970953, -2971209, -2971209, -2970953, -2970953, -2905416, -2905416, -2905416, -2905416, -2905416, -2905416, -2905416, -2905416, -2905416, -2905416, -2905416, -2970952, -2905416, -2839880, -2905416, -2839880, -2839881, -2839881, -2839881, -2839881, -2839881, -2839881, -2839881, -2839881, -2839881, -2839881, -2839881, -2839881, -2839881, -2839882, -2839882, -2774345, -2774089, -2708552, -2774088, -2774088, -2774088, -2774088, -2774088, -2774088, -2774088, -2774088, -2774088, -2774088, -2774088, -2774088, -2774088, -2774088, -2774088, -2774089, -2773834, -2708298, -2643017, -2643017, -2708298, -2708298, -2642760, -2577224, -2642761, -2642761, -2577224, -2577224, -2642761, -2642761, -2643017, -2643017, -2708298, -2708298, -2643017, -2643017, -2708298, -2708298, -2643017, -2643017, -2708298, -2708298, -2643017, -2577481, -2577482, -2643018, -2643018, -2643018, -2643018, -2643018, -2643018, -2643018, -2643018, -2643018, -2643018, -2643018, -2643018, -2643018, -2643018, -2643018, -2643018, -2577482, -2577225, -2577225, -2577225, -2577225, -2577225, -2577225, -2577225, -2577225, -2577225, -2577225, -2577225, -2577225, -2577225, -2577225, -2577225, -2577225, -2511433, -2511433, -2511433, -2511433, -2511433, -2511433, -2511433, -2511433, -2511433, -2511433, -2511433, -2511433, -2511433, -2511433, -2511433, -2511433, -2511433, -2511433, -2511433, -2511433, -2511433, -2511433, -2511433, -2511433, -2511433, -2511433, -2511433, -2511433, -2511433, -2511433, -2511433, -2445897, -2445897, -2445897, -2445897, -2445897, -2445897, -2445897, -2445897, -2445897, -2380104, -2380104, -2380104, -2380104, -2380104, -2380104, -2380104, -2380104, -2380104, -2380104, -2380104, -2380104, -2380104, -2380104, -2380104, -2380104, -2380104, -2380104, -2380104, -2380104, -2380104, -2380104, -2380104, -2380104, -2314313, -2248777, -2314313, -2314313, -2314313, -2314313, -2314313, -2314313, -2314313, -2314313, -2314313, -2314313, -2314313, -2314313, -2314313, -2314313, -2314570, -2314570, -2314570, -2314570, -2314570, -2314570, -2314570, -2314570, -2314570, -2314570, -2314570, -2314570, -2314570, -2314570, -2314570, -2314570, -2314314, -2314313, -2314313, -2314313, -2314313, -2314313, -2314313, -2314313, -2314313, -2314313, -2314313, -2314313, -2314313, -2314313, -2314313, -2314313, -2314313, -2314313, -2314313, -2314313, -2314313, -2314313, -2314313, -2314313, -2314313, -2314313, -2314313, -2314313, -2314313, -2314314, -2314315, -2248779, -2182988, -2117452, -2117452, -2117452, -2117452, -2117452, -2117452, -2117452, -2117452, -2117452, -2117452, -2117452, -2117452, -2117452, -2117452, -2117452, -2183245, -2183245, -2183245, -2183245, -2183245, -2183245, -2117452, -2117452, -2117452, -2117452, -2117452, -2117452, -2117452, -2117452, -2051659, -2051659, -2051659, -2051659, -2051659, -2051659, -2051659, -2051659, -2051659, -2051659, -2051659, -2051659, -2051659, -2051659, -2051659, -2051659, -2051659, -2051659, -2051659, -2051659, -2051659, -2051659, -2051659, -2051659, -2051659, -2051659, -2051659, -2051659, -2051659, -2051659, -2051659, -2051659, -2051659, -2051659, -2051660, -2051660, -2051660, -2051660, -2051660, -2051660, -2051660, -2051660, -2051660, -2051660, -2051660, -2051660, -2051660, -2051660, -2051660, -2051660, -2051660, -2051660, -2051660, -2051660, -2051660, -2051660, -2051660, -2051660, -2051660, -2051660, -2051660, -2051660, -2051660, -2051660, -2051660, -2051660, -1986124, -1986124, -1986124, -1986124, -1986124, -1986124, -1986124, -1986124, -1986124, -1986124, -1986124, -1986124, -1986124, -1986124, -1986124, -1986124, -1986124, -1986124, -1986124, -1986124, -1986124, -1986124, -1986124, -1986124, -1986124, -1986124, -1986124, -1986124, -1986124, -1986124, -1986124, -1986124, -1986125, -1986126, -1986126, -1986126, -1986126, -1986126, -1986126, -1986126, -1986126, -1986126, -1986126, -1986126, -1986126, -1986126, -1986126, -1920333, -1920333, -1854540, -1854540, -1854540, -1854540, -1854540, -1854540, -1854540, -1854540, -1854540, -1854540, -1854540, -1854540, -1854540, -1854540, -1854541, -1920334, -1920335, -1920335, -1920335, -1920335, -1920335, -1920335, -1920335, -1920335, -1920335, -1920335, -1920335, -1920335, -1920335, -1920335, -1920335, -1920335, -1920335, -1920335, -1920335, -1920335, -1920335, -1920335, -1920335, -1920335, -1920335, -1920335, -1920335, -1920335, -1920335, -1920335, -1920335)
//    val colors4 = intArrayOf(-1529206, -1529206, -1529206, -1529206, -1529206, -1529206, -1529206, -1529206, -1529206, -1529206, -1463670, -1463670, -1463670, -1463670, -1529207, -1529207, -1529207, -1529207, -1398391, -1398391, -1398391, -1398391, -1464184, -1464184, -1464184, -1464184, -1332855, -1332855, -1332855, -1332855, -1398904, -1398904, -1398904, -1398904, -1464441, -1464441, -1464441, -1464697, -1399418, -1399418, -1464698, -1530235, -1529980, -1529980, -1529980, -1529980, -1529980, -1529980, -1530237, -1530237, -1530237, -1530237, -1530237, -1530237, -1464957, -1464957, -1464957, -1464957, -1531006, -1531006, -1531006, -1531006, -1465470, -1465470, -1465470, -1465470, -1465470, -1465470, -1531263, -1531263, -1531263, -1531263, -1531263, -1531264, -1531521, -1531522, -1531522, -1531522, -1466242, -1466242, -1466242, -1466242, -1466242, -1466242, -1532035, -1532035, -1532035, -1532035, -1532292, -1532292, -1466755, -1466755, -1466755, -1466755, -1532548, -1532548, -1532548, -1532548, -1401476, -1401476, -1401476, -1401476, -1467269, -1467269, -1467269, -1467269, -1401477, -1401477, -1467270, -1467270, -1467270, -1467270, -1533063, -1533063, -1467783, -1467783, -1467783, -1467783, -1467783, -1467783, -1467783, -1467783, -1467783, -1467783, -1467783, -1467783, -1468040, -1468040, -1468040, -1468040, -1468040, -1468040, -1468040, -1468040, -1533833, -1533833, -1533833, -1533833, -1403018, -1403018, -1403018, -1403018, -1403018, -1403018, -1403018, -1403018, -1468811, -1468811, -1468811, -1468811, -1403531, -1403531, -1403531, -1403531, -1469324, -1469324, -1469324, -1469324, -1338252, -1338252, -1404045, -1404045, -1404045, -1404045, -1404045, -1404045, -1404045, -1404045, -1404045, -1404045, -1469838, -1469839, -1469840, -1469840, -1469840, -1469840, -1469840, -1469840, -1404560, -1404560, -1404560, -1404560, -1404560, -1404560, -1404560, -1404560, -1339281, -1339281, -1339281, -1339281, -1339281, -1339281, -1405074, -1405074, -1339794, -1339794, -1339794, -1339794, -1339794, -1339794, -1339794, -1339794, -1470867, -1470868, -1470868, -1470868, -1470868, -1470868, -1470868, -1470868, -1405588, -1405588, -1471381, -1471381, -1471381, -1471381, -1471381, -1471381, -1471381, -1471381, -1471381, -1471381, -1405845, -1405845, -1471638, -1471638, -1471638, -1471638, -1471638, -1471638, -1471638, -1471638, -1471638, -1471638, -1340566, -1340566, -1340566, -1340566, -1340566, -1340566, -1340566, -1340566, -1406359, -1406359, -1406359, -1406359, -1341079, -1341079, -1341079, -1341079, -1406872, -1406872, -1406872, -1406872, -1276056, -1276056, -1276056, -1276056, -1276056, -1276056, -1276056, -1276056, -1276056, -1276056, -1276056, -1341592, -1407129, -1472665, -1472665, -1472665, -1341849, -1341849, -1341849, -1341849, -1341849, -1341849, -1341849, -1341849, -1341849, -1341849, -1341849, -1341849, -1342106, -1342106, -1342106, -1342106, -1342106, -1342106, -1342106, -1342106, -1276826, -1276826, -1342619, -1342619, -1342619, -1342619, -1342619, -1342619, -1407899, -1407899, -1407899, -1407899, -1407899, -1407899, -1473691, -1473691, -1408411, -1408411, -1408411, -1408411, -1408411, -1408411, -1408411, -1408411, -1277595, -1277595, -1277595, -1277595, -1277595, -1277595, -1277595, -1277595, -1343388, -1343388, -1343388, -1343388, -1277852, -1277852, -1277852, -1277852, -1343388, -1343388, -1343388, -1343388, -1343388, -1343388, -1343388, -1343388, -1343388, -1343388, -1409181, -1409181, -1409181, -1409181, -1409181, -1409181, -1343388, -1343388, -1343388, -1343388, -1409181, -1409181, -1409181, -1409181, -1409181, -1409181, -1409181, -1409181, -1474974, -1474974, -1474974, -1409438, -1344158, -1278622, -1278622, -1278622, -1278622, -1278622, -1278622, -1278622, -1278622, -1278622, -1278622, -1278622, -1278622, -1278622, -1278622, -1278622, -1212829, -1212829, -1278622, -1278622, -1278622, -1278622, -1344415, -1344415, -1344415, -1344415, -1344415, -1344415, -1344415, -1344415, -1344415, -1344415, -1279135, -1279135, -1279135, -1279135, -1279135, -1279135, -1279135, -1279135, -1279135, -1279135, -1279135, -1279135, -1279135, -1279135, -1279135, -1279135, -1344928, -1344928, -1344928, -1344928, -1344928, -1344928, -1344928, -1344928, -1344928, -1344928, -1344928, -1344928, -1344928, -1344928, -1344928, -1344928, -1279646, -1279646, -1279646, -1279646, -1279646, -1279646, -1345439, -1345439, -1345439, -1345439, -1345439, -1345439, -1345439, -1345439, -1345439, -1345439, -1345439, -1345439, -1345439, -1345439, -1345439, -1345439, -1345439, -1345439, -1345439, -1345439, -1345439, -1345439, -1345439, -1345439, -1345439, -1279903, -1214622, -1214622, -1214622, -1214622, -1214622, -1214622, -1214622, -1214622, -1214622, -1214622, -1214622, -1214622, -1214622, -1214622, -1214622, -1214622, -1148829, -1148829, -1148829, -1148829, -1148829, -1148829, -1214622, -1214622, -1214622, -1214622, -1214622, -1214622, -1214622, -1214622, -1214622, -1214622, -1280415, -1280415, -1280415, -1280415, -1280415, -1280415, -1280415, -1280415, -1280415, -1280415, -1280415, -1280415, -1280413, -1280413, -1280413, -1280413, -1214620, -1214620, -1214620, -1214620, -1214875, -1214875, -1214875, -1214875, -1214875, -1214875, -1214875, -1214875, -1214875, -1214875, -1214875, -1214875, -1280410, -1280410, -1280410, -1280410, -1280410, -1280410, -1280410, -1280410, -1214873, -1214873, -1214873, -1214873, -1214873, -1214873, -1214873, -1214873, -1280410, -1280410, -1280410, -1280410, -1280410, -1280410, -1280410, -1280410, -1280410, -1280410, -1280410, -1280410, -1280410, -1280410, -1280410, -1280410, -1280410, -1280410, -1280410, -1280410, -1280410, -1280410, -1280410, -1280410, -1280408, -1280408, -1280408, -1280408, -1280408, -1280408, -1280408, -1280408, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1346455, -1346455, -1346455, -1346455, -1346455, -1346455, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280662, -1280660, -1280660, -1280660, -1280660, -1280660, -1280660, -1280660, -1280660, -1280915, -1280915, -1280915, -1280915, -1280915, -1280915, -1280915, -1280915, -1280915, -1280915, -1346195, -1346195, -1345938, -1345938, -1345938, -1345938, -1345938, -1345938, -1345938, -1345938, -1345938, -1345938, -1345938, -1345938, -1345936, -1345936, -1345936, -1345936, -1345936, -1345936, -1345936, -1345936, -1346191, -1346191, -1346191, -1346191, -1346191, -1346191, -1346191, -1346191, -1346191, -1346191, -1346191, -1346191, -1411984, -1411984, -1411984, -1411984, -1411984, -1411984, -1411984, -1411984, -1411982, -1411982, -1411982, -1411982, -1411982, -1411982, -1411982, -1411981, -1346188, -1346187, -1346187, -1346187, -1346187, -1346187, -1346187, -1346443, -1346442, -1346442, -1346442, -1346442, -1346442, -1346442, -1411978, -1411723, -1411724, -1411724, -1411724, -1411724, -1411724, -1411724, -1411724, -1411724, -1411724, -1411724, -1411724, -1411724, -1411723, -1411722, -1411722, -1411722, -1411722, -1411722, -1411722, -1411722, -1411721, -1411720, -1411720, -1411720, -1411720, -1411720, -1411720, -1411720, -1411720, -1411720, -1411720, -1411720, -1411720, -1411720, -1411720, -1411720, -1411720, -1411720, -1411720, -1411720, -1411720, -1411720, -1411720, -1411976, -1411975, -1411975, -1411975, -1411975, -1411975, -1411975, -1411975, -1411975, -1411975, -1411975, -1411975, -1411975, -1411974, -1411973, -1411973, -1411973, -1411973, -1411973, -1411973, -1411973, -1411972, -1411971, -1411971, -1411971, -1411971, -1411971, -1411971, -1411971, -1411971, -1411971, -1411971, -1411971, -1411971, -1411971, -1411971, -1411971, -1346178, -1346178, -1346178, -1346178, -1346178, -1346178, -1346178, -1346178, -1346178, -1346178, -1346178, -1346178, -1346178, -1346178, -1346178, -1346178, -1411714, -1411714, -1411714, -1411714, -1411714, -1411714, -1411714, -1411714, -1411712, -1411712, -1411712, -1411712, -1411712, -1411712, -1411712, -1411712, -1411712, -1411712, -1411712, -1411712, -1411711, -1411711, -1411711, -1411711, -1411711, -1411711, -1411711, -1411711, -1411711, -1411711, -1411711, -1477247, -1543040, -1543040, -1543040, -1543040, -1543040, -1543040, -1543040, -1543040, -1543040, -1543040, -1543040, -1543040)
//    val colors5 = intArrayOf(-13772844, -13772844, -13772844, -13772844, -13772844, -13772844, -13773100, -13773100, -13773100, -13773100, -13707307, -13707307, -13707307, -13707307, -13707307, -13707307, -13707307, -13707307, -13707052, -13707052, -13707052, -13707052, -13707052, -13707052, -13707052, -13707052, -13707052, -13707052, -13707052, -13707052, -13707308, -13707308, -13707308, -13707308, -13707308, -13707308, -13707308, -13707308, -13641771, -13641771, -13641771, -13641771, -13641771, -13641771, -13641771, -13641771, -13575978, -13575978, -13575978, -13575978, -13641771, -13641771, -13641771, -13641771, -13641771, -13641771, -13641771, -13641771, -13641771, -13641771, -13641771, -13641771, -13576491, -13576491, -13576491, -13576490, -13444905, -13444905, -13444905, -13444905, -13445161, -13445161, -13445161, -13445161, -13445161, -13445161, -13445161, -13445161, -13445161, -13445162, -13445163, -13445163, -13445163, -13445164, -13444909, -13444909, -13444909, -13444909, -13444909, -13444909, -13444909, -13444909, -13379116, -13379116, -13379116, -13379116, -13379116, -13379116, -13314093, -13314093, -13314093, -13314093, -13314093, -13314093, -13314093, -13314093, -13314349, -13314349, -13314349, -13314349, -13314349, -13314349, -13314349, -13314350, -13314351, -13314351, -13314351, -13314351, -13314351, -13314351, -13314351, -13314351, -13249071, -13249071, -13183278, -13183022, -13183022, -13183022, -13183022, -13183022, -13117742, -13117742, -13117742, -13117742, -13117742, -13117742, -13117742, -13117742, -13117742, -13117742, -13117742, -13117742, -13052206, -13052206, -13052206, -13052206, -13052206, -13052206, -13052206, -13052206, -13052206, -13052206, -13051949, -13051949, -13051949, -13051949, -13051949, -13051949, -12921134, -12921134, -12921134, -12921134, -12921134, -12921134, -12921134, -12921134, -12921392, -12921392, -12921392, -12921392, -12855599, -12855599, -12855599, -12855599, -12855599, -12855599, -12855599, -12855599, -12855599, -12855599, -12855599, -12855599, -12855599, -12855599, -12855599, -12855599, -12855599, -12855599, -12855599, -12855600, -12855601, -12855601, -12855601, -12855601, -12790321, -12790321, -12790321, -12790321, -12790321, -12790321, -12790321, -12790321, -12724787, -12724787, -12658994, -12658994, -12658994, -12658994, -12658994, -12658994, -12724786, -12724786, -12724786, -12724785, -12658992, -12658992, -12658992, -12658993, -12593714, -12593714, -12593714, -12593714, -12527921, -12527921, -12527921, -12527921, -12528179, -12528179, -12528179, -12528179, -12528179, -12528179, -12462386, -12462386, -12462388, -12462388, -12462388, -12462388, -12396852, -12396852, -12396852, -12396851, -12331314, -12331313, -12331313, -12331313, -12331313, -12331313, -12331313, -12331313, -12331059, -12331059, -12331059, -12331059, -12265779, -12265779, -12265779, -12265779, -12265522, -12265522, -12265522, -12265522, -12134452, -12134452, -12134452, -12134452, -12134452, -12134452, -12134452, -12134452, -12134452, -12134452, -12134452, -12134452, -12068659, -12068659, -12068659, -12068659, -12003379, -12003379, -12003379, -12003379, -12003379, -12003379, -12003379, -12003379, -12003379, -12003379, -12003379, -12003379, -11872306, -11872306, -11872306, -11872306, -11872306, -11872306, -11872306, -11872306, -11807026, -11807026, -11807026, -11807026, -11807026, -11807026, -11807026, -11807027, -11806772, -11806772, -11806772, -11806772, -11806772, -11806772, -11806772, -11806772, -11741492, -11741492, -11741492, -11741493, -11741494, -11741494, -11741494, -11741494, -11675701, -11675701, -11675701, -11675701, -11675702, -11675702, -11675702, -11675702, -11675702, -11675702, -11675702, -11675702, -11675702, -11675702, -11675702, -11675702, -11544375, -11544375, -11544375, -11544375, -11544375, -11544375, -11544375, -11544375, -11544375, -11544375, -11544375, -11544375, -11413559, -11413559, -11413559, -11413559, -11347766, -11347766, -11347766, -11347766, -11348022, -11348022, -11348022, -11348022, -11348022, -11348022, -11348022, -11348022, -11348022, -11348022, -11348022, -11348022, -11347766, -11347766, -11347766, -11347766, -11348022, -11348022, -11348022, -11348023, -11347767, -11347767, -11347767, -11347767, -11347767, -11347767, -11347767, -11347768, -11282232, -11216696, -11216696, -11216696, -11216696, -11216696, -11216696, -11216696, -11085880, -11085880, -11085880, -11085880, -11085625, -11085625, -11085625, -11085625, -11085880, -11085880, -11085880, -11085880, -11085880, -11085880, -11020087, -11020087, -10954551, -10954551, -10954551, -10954551, -10954552, -10954552, -10954552, -10954552, -10888759, -10888759, -10888759, -10888759, -10823224, -10823224, -10823224, -10823224, -10823224, -10823224, -10823224, -10823224, -10823224, -10823224, -10823224, -10823224, -10823224, -10823224, -10823224, -10823224, -10757431, -10757431, -10757431, -10757431, -10757431, -10757431, -10757431, -10691895, -10626360, -10626360, -10626360, -10626360, -10692410, -10757946, -10757946, -10692410, -10626619, -10626619, -10626619, -10626619, -10626619, -10626619, -10626619, -10626619, -10560826, -10560826, -10560827, -10560828, -10560828, -10560828, -10560573, -10560573, -10429757, -10429757, -10429757, -10429757, -10429757, -10429757, -10429757, -10429757, -10429757, -10429757, -10429757, -10429757, -10364220, -10364220, -10364220, -10364220, -10364220, -10364220, -10364220, -10364220, -10233148, -10233148, -10233148, -10233148, -10233148, -10233148, -10233148, -10233148, -10298683, -10364219, -10364219, -10298683, -10298426, -10232890, -10298426, -10232890, -10167355, -10167355, -10167355, -10167355, -10101562, -10101562, -10101562, -10101819, -10167613, -10167870, -10167870, -10167870, -10102077, -10102077, -10102077, -10102077, -10102077, -10102077, -10102077, -10102077, -9970749, -9970750, -9970750, -9970749, -9970492, -9970491, -9970491, -9970491, -9970491, -9970491, -9970491, -9970491, -9970491, -9970491, -9970491, -9970491, -9905211, -9905211, -9905211, -9905211, -9971004, -9971004, -9971004, -9971004, -9839932, -9839932, -9839932, -9839932, -9839932, -9839932, -9839932, -9839932, -9839932, -9839932, -9839932, -9839933, -9839934, -9839934, -9839934, -9839934, -9839934, -9839934, -9839934, -9839934, -9774141, -9774141, -9774141, -9774142, -9774143, -9774143, -9774143, -9774143, -9774143, -9774143, -9774143, -9774143, -9773888, -9773888, -9773888, -9773888, -9773888, -9773888, -9773888, -9773888, -9773888, -9773888, -9773888, -9773888, -9708094, -9707838, -9707838, -9707838, -9707838, -9707838, -9707838, -9707838, -9707838, -9707838, -9707838, -9707838, -9642558, -9642558, -9642558, -9642559, -9642815, -9708351, -9708351, -9642815, -9643071, -9643071, -9643071, -9643071, -9643071, -9643071, -9643071, -9643071, -9643071, -9643071, -9642817, -9642817, -9577025, -9577025, -9577026, -9577026, -9577026, -9577026, -9577026, -9577026, -9577026, -9577026, -9577026, -9577026, -9577026, -9577026, -9577026, -9577026, -9511233, -9511233, -9511233, -9511233, -9511233, -9511233, -9511233, -9511233, -9511233, -9511233, -9511233, -9511233, -9511233, -9511233, -9511233, -9511233, -9445699, -9445699, -9445699, -9445699, -9445699, -9445699, -9445699, -9445699, -9445699, -9445699, -9445699, -9445699, -9445699, -9445699, -9445699, -9445699, -9445699, -9445699, -9445699, -9445699, -9445699, -9445699, -9445699, -9445699, -9445699, -9445699, -9445699, -9445699, -9445699, -9445699, -9445699, -9445699, -9379907, -9379907, -9379907, -9379907, -9379907, -9379907, -9379907, -9379907, -9379907, -9379907, -9379907, -9379907, -9379907, -9379907, -9379907, -9379907, -9379907, -9379907, -9379907, -9379907, -9379907, -9379907, -9379907, -9379907, -9379907, -9379907, -9379907, -9379907, -9379907, -9379907, -9379907, -9314371, -9248580, -9183044, -9117764, -9117764, -9117764, -9117764, -9117764, -9117764, -9117764, -9117764, -9117764, -9117764, -9117764, -9117764, -9117764, -9117764, -9117764, -9117764, -9117764, -9117764, -9117764, -9117764, -9117764, -9117764, -9117764, -9117764, -9117764, -9117764, -9117764, -9117764, -9117764, -9183300, -9248837, -9314373, -9314373, -9314373, -9314373, -9314373, -9248580, -9248580, -9248580, -9248580, -9248580, -9248580, -9248580, -9248580, -9248580, -9248580, -9248580, -9248580, -9248580, -9248580, -9248580, -9248580, -9248580, -9248580, -9248580, -9248580, -9248580, -9248580, -9248580, -9248580, -9248580, -9183044, -9117507, -9051971, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9052227, -9051971, -9051971, -9117764, -9117764, -9117764, -9117764, -9117764, -9117764, -9117764, -9117764, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9051971, -9117251, -9182787, -9182787, -9182787, -9182787, -9182787, -9182787, -9182787, -9182787, -9182787, -9182787, -9182787, -9182787, -9182787, -9182787, -9182787, -9182787, -9182787, -9182787, -9182787, -9182787, -9182787, -9182787, -9182787, -9182787, -9182787, -9182787, -9182787, -9182787, -9182787, -9182787, -9182787, -9182787, -9182787, -9182787, -9182787)
    val colors = arrayOf(colors1, colors2, colors3)//Screen Shot 2017-08-13 at 14.59.52, colors4, colors5)
    var colorPalete = 0
    var zoom = 0
    var xOffset = 0
    var yOffset = 0
    var width: Int = 0
    var height: Int = 0

    fun init() {
        window.onresize = { onResize() }
        window.onkeypress = { onKeyPress(it as KeyboardEvent) }
        window.onmousedown = { onMouse(it as MouseEvent, true) }
        window.onmouseup = { onMouse(it as MouseEvent, false) }
        onResize()
        xOffset = (-width * 1.5).toInt()
        yOffset = -height * 2
        zoom = 2400
//        xOffset = -width / 2
//        yOffset = -height / 2
//        zoom = 300
//        xOffset = -6537
//        yOffset = -2303
//        zoom = 8700
        draw()
    }

    var mouseDownX = 0
    var mouseDownY = 0

    private fun onMouse(event: MouseEvent, down: Boolean): Unit {
        if (down) {
            mouseDownX = event.screenX
            mouseDownY = event.screenY
        } else {
            xOffset -= event.screenX - mouseDownX
            yOffset -= event.screenY - mouseDownY
            draw()
        }
    }

    fun onKeyPress(event: KeyboardEvent): Unit {
        when (event.code) {
            "KeyQ" -> {   //q
                zoom += 1000
            }
            "KeyA" -> {   //w
                zoom -= 1000
            }
            "KeyW" -> {   //q
                zoom += 100
            }
            "KeyS" -> {   //w
                zoom -= 100
            }
            "KeyC" -> {   //w
                colorPalete = (colorPalete + 1) % colors.size
            }
        }
        draw()
    }

//    zoom: 8700 xOffset: -6537 yOffset: -2303
//    zoom: 13700 xOffset: -10202 yOffset: -4136

    fun onResize() {
//    canvas.setAttribute("width", "500")
//    canvas.setAttribute("height", "500")
        canvas.setAttribute("width", window.innerWidth.toString())
        canvas.setAttribute("height", window.innerHeight.toString())
        width = canvas.clientWidth
        height = canvas.clientHeight
        draw()
    }

    fun draw() {
        val start = Date().getTime()
        ctx.clearRect(0.0, 0.0, width.toDouble(), height.toDouble())
        ctx.beginPath()
        for (y in 0..height - 1) {
            for (x in 0..width - 1) {
                val m = mandelbrot(x, y, zoom, xOffset, yOffset)
                ctx.fillStyle = getColor(m)
                ctx.fillRect(x.toDouble(), y.toDouble(), 1.0, 1.0)
            }
        }
        ctx.stroke()
        val elapsed = Date().getTime() - start
        println("draw elapsed: $elapsed zoom: $zoom xOffset: $xOffset yOffset: $yOffset")
    }

    fun getColor(m: Double): String {
        val index = (m * (colors[colorPalete].size - 1)).toInt()
        val g = colors[colorPalete][index]
        return "#${g.toHex()}"
    }

    fun mandelbrot(x: Int, y: Int, zoom: Int, xOffset: Int, yOffset: Int): Double {
        val a = (x.toDouble() + xOffset) / zoom
        val b = (y.toDouble() + yOffset) / zoom
        var curA = 0.0
        var curB = 0.0
        repeat(iterationsCount) {
            val nextA = curA * curA - curB * curB + a
            val nextB = curA * curB + curA * curB + b
            curA = nextA
            curB = nextB
            if (curA * curA + curB * curB > 4) {
                return it / (iterationsCount + 1.toDouble())
            }
        }
        return 1.0
    }

}

fun Int.toHex(): String = listOf(b2(), b3(), b4()).map(::byteToHex).joinToString("")

fun byteToHex(v: Int): String = hexDigit(v / 16).toString() + hexDigit(v % 16)

fun hexDigit(v: Int): Char = charArrayOf('0' , '1' , '2' , '3' , '4' , '5' , '6' , '7' , '8' , '9' , 'a' , 'b' , 'c' , 'd' , 'e' , 'f')[v]

inline fun Int.b1(): Int = (this shr 24).lastByte()
inline fun Int.b2(): Int = (this shr 16).lastByte()
inline fun Int.b3(): Int = (this shr 8).lastByte()
inline fun Int.b4(): Int = lastByte()
inline fun Int.lastByte(): Int = this and 0x000000ff
